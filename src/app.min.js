$(document).ready(function(){function t(){$("div#chat-list").css("display","none"),$("div#chat").css("display","block"),$("div#chat div#chat-input textarea").focus(),$("div#chat-messages").scrollTop(5e3)}function e(t){let e=$(":focus").prop("tagName"),s=$(":focus").attr("tabindex"),i=$(":focus").siblings().length;"down"==t&&s<i&&(s++,$(e+"[tabindex="+s+"]").focus()),"up"==t&&s>0&&(s--,$("ul[tabindex="+s+"]").focus()),"right"==t&&s<i&&(s++,$("div[tabindex="+s+"]").focus()),"left"==t&&s>0&&(s--,$("div[tabindex="+s+"]").focus())}function s(t){$("div#chat").is(":visible")&&("down"==t&&$("div#chat-messages").scrollTop(r+=10),"up"==t&&$("div#chat-messages").scrollTop(r-=10))}function i(){$("div#chat").is(":visible")&&($("div#chat-list").css("display","block"),$("div#chat").css("display","none"),$(items[0]).focus())}function a(t){"show"==t&&($("div#chat div#chat-attachments").css("display","block"),$("div#chat div#chat-attachments div.inner div:first-child").focus()),"hidde"==t&&$("div#chat div#chat-attachments").css("display","none")}function c(){a("show"),clearTimeout(o)}function n(a){switch(a.key){case"Enter":t(),o=setTimeout(c,1500);break;case"ArrowDown":e("down");break;case"ArrowUp":e("up");break;case"ArrowLeft":e("left");break;case"ArrowRight":e("right");break;case"SoftLeft":s("down");break;case"SoftRight":s("up");break;case"Backspace":if(a.preventDefault(),$("div#chat-attachments").is(":visible"))return $("div#chat-attachments").css("display","none"),!1;i(),$("div#chat-list").is(":visible");break;case"2":s("down");break;case"1":s("up")}}function d(t){switch(t.key){case"Enter":clearTimeout(o)}}setTabindex("div#chat-list","ul.user-item"),$(items[0]).focus();$(":focus").attr("tabindex");let o,r=0;document.addEventListener("keydown",n),document.addEventListener("keyup",d)});