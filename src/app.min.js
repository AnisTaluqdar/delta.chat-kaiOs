$(document).ready(function(){function t(t){let i=$(":focus").prop("tagName"),e=$(":focus").attr("tabindex"),a=$(":focus").siblings().length;"down"==t&&e<a&&(e++,$(i+"[tabindex="+e+"]").focus()),"up"==t&&e>0&&(e--,$(i+"[tabindex="+e+"]").focus()),"right"==t&&e<a&&(e++,$("div[tabindex="+e+"]").focus()),"left"==t&&e>0&&(e--,$("div[tabindex="+e+"]").focus())}function i(t){if("show"==t){$("div#chat-list").css("display","none"),$("div#chat").css("display","block"),setTabindex("div#chat-messages","div.message"),items=$("div#chat-messages div.message");let t=items.length-1;$(items[t]).focus(),toaster("hey"),h="chat"}"hidde"==t&&$("div#chat").css("display","none")}function e(t){"show"==t&&($("div#chat-list").css("display","block"),$(items[0]).focus(),h="chat-list"),"hidde"==t&&$("div#chat-list").css("display","none")}function a(t){"show"==t&&($("div#chat div#chat-attachments").css("display","block"),$("div#chat div#chat-attachments div.inner div:first-child").focus(),$("div#chat div#bottom-bar div#button-left").text("cancel"),$("div#chat div#bottom-bar div#button-center").text("select"),$("div#chat div#bottom-bar div#button-right").text(""),h="attachment"),"hidde"==t&&($("div#chat div#chat-attachments").css("display","none"),$("div#chat div#chat-input textarea").focus(),$("div#chat div#bottom-bar div#button-left").text("abort"),$("div#chat div#bottom-bar div#button-center").text("attachment"),$("div#chat div#bottom-bar div#button-right").text("send"),h="chat-input")}function c(t){"show"==t&&($("div#chat div#chat-input").css("display","block"),$("div#chat div#chat-input textarea").focus(),$("div#chat div#bottom-bar div#button-left").text("abort"),$("div#chat div#bottom-bar div#button-center").text("attachment"),$("div#chat div#bottom-bar div#button-right").text("send"),h="chat-input"),"hidde"==t&&($("div#chat div#chat-input").css("display","none"),$("div#chat div#bottom-bar div#button-left").text("back"),$("div#chat div#bottom-bar div#button-center").text(""),$("div#chat div#bottom-bar div#button-right").text("ðŸ–‰"),h="chat")}function d(){clearTimeout(o)}function s(s){switch(s.key){case"Enter":if("chat-list"==h)return i("show"),!1;if("chat-input"==h)return s.preventDefault(),a("show"),o=setTimeout(d,1500),!1;break;case"ArrowDown":t("down");break;case"ArrowUp":t("up");break;case"ArrowLeft":t("left");break;case"ArrowRight":t("right");break;case"SoftLeft":if("chat"==h)return e("show"),!1;if("chat-input"==h)return toaster("ho"),c("hidde"),i("show"),!1;if("attachment"==h)return a("hidde"),!1;break;case"SoftRight":if(h="chat-input")return c("show"),!1;break;case"Backspace":s.preventDefault(),(h="chat-list")&&window.close();break;case"2":if(h="chat-input")return c("show"),!1;break;case"1":if("chat"==h)return e("show"),!1;if("chat-input"==h)return c("hidde"),i("show"),!1;if("attachment"==h)return a("hidde"),!1}}function n(t){switch(t.key){case"Enter":clearTimeout(o)}}setTabindex("div#chat-list","ul.user-item"),$(items[0]).focus();let o,h="chat-list";$(":focus").attr("tabindex");document.addEventListener("keydown",s),document.addEventListener("keyup",n)});