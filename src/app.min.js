$(document).ready(function(){function t(){$("div#chat-list").css("display","none"),$("div#chat").css("display","block"),$("div#chat div#chat-input textarea").focus(),$("div#chat-messages").scrollTop(5e3)}function i(t){let i=$(":focus").prop("tagName"),e=$(":focus").attr("tabindex"),s=$(":focus").siblings().length;"down"==t&&e<s&&(e++,$(i+"[tabindex="+e+"]").focus()),"up"==t&&e>0&&(e--,$("ul[tabindex="+e+"]").focus()),"right"==t&&e<s&&(e++,$("div[tabindex="+e+"]").focus()),"left"==t&&e>0&&(e--,$("div[tabindex="+e+"]").focus())}function e(t){$("div#chat").is(":visible")&&("down"==t&&$("div#chat-messages").scrollTop(r+=15),"up"==t&&$("div#chat-messages").scrollTop(r-=15))}function s(){$("div#chat").is(":visible")&&($("div#chat-list").css("display","block"),$("div#chat").css("display","none"),$(items[0]).focus())}function a(t){"show"==t&&($("div#chat div#chat-attachments").css("display","block"),$("div#chat div#chat-attachments div.inner div:first-child").focus()),"hidde"==t&&($("div#chat div#chat-attachments").css("display","none"),$("div#chat div#chat-input textarea").focus())}function c(){a("show"),clearTimeout(o)}function n(n){switch(n.key){case"Enter":if($("div#chat-list").is(":visible"))return t(),!1;if($("div#chat").is(":visible"))return n.preventDefault(),o=setTimeout(c,1500),!1;break;case"ArrowDown":i("down");break;case"ArrowUp":i("up");break;case"ArrowLeft":i("left");break;case"ArrowRight":i("right");break;case"SoftLeft":e("down");break;case"SoftRight":e("up");break;case"Backspace":if(n.preventDefault(),$("div#chat-attachments").is(":visible"))return a("hidde"),!1;if($("div#chat").is(":visible"))return s(),!1;$("div#chat-list").is(":visible")&&window.close();break;case"2":e("down");break;case"1":e("up")}}function d(t){switch(t.key){case"Enter":clearTimeout(o)}}setTabindex("div#chat-list","ul.user-item"),$(items[0]).focus();$(":focus").attr("tabindex");let o,r=1;document.addEventListener("keydown",n),document.addEventListener("keyup",d)});