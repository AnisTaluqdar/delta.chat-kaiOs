"use strict";$(document).ready(function(){function t(t){let i=$(":focus").prop("tagName"),e=$(":focus").attr("tabindex"),a=$(":focus").siblings().length;"down"==t&&e<a&&(e++,$(i+"[tabindex="+e+"]").focus()),"up"==t&&e>0&&(e--,$(i+"[tabindex="+e+"]").focus()),"right"==t&&e<a&&(e++,$(i+"[tabindex="+e+"]").focus()),"left"==t&&e>0&&(e--,$(i+"[tabindex="+e+"]").focus())}function i(t){if("show"==t){$("div#chat-list").css("display","none"),$("div#chat").css("display","block"),setTabindex("div#chat-messages","div.message"),items=$("div#chat-messages div.message");let t=items.length-1;$(items[t]).focus(),h="chat"}"hidde"==t&&$("div#chat").css("display","none")}function e(t){if("show"==t){$("div#chat-list").empty();for(let t=0;t<data_chat_list.length;t++){let i='<li class="user-name flex">'+data_chat_list[t].name+'</li><li class="unread-messages">'+data_chat_list[t].unreadMessageCount+"</li>";$("div#chat-list").append('<ul class="user-item flex justify-content-spacebetween">'+i+"</ul>")}$("div#chat-list").css("display","block"),setTabindex("div#chat-list","ul.user-item"),items=$("div#chat-list ul.user-item"),$(items[0]).focus(),h="chat-list"}"hidde"==t&&$("div#chat-list").css("display","none")}function a(t){if("show"==t){$("div#chat div#chat-attachments").css("display","block"),$("div#chat div#chat-attachments div.inner div:first-child").focus(),$("div#chat div#bottom-bar div#button-left").html('<img src="icons/arrow-left.svg"/>'),$("div#chat div#bottom-bar div#button-center").html(""),$("div#chat div#bottom-bar div#button-right").html(""),setTabindex("div#chat-attachments div.inner","div"),items=$("div#chat-attachments div.inner div");let t=items.length-1;$(items[t]).focus(),h="attachment"}"hidde"==t&&($("div#chat div#chat-attachments").css("display","none"),$("div#chat div#chat-input textarea").focus(),$("div#chat div#bottom-bar div#button-left").html('<img src="icons/arrow-left.svg"/>'),$("div#chat div#bottom-bar div#button-center").html('<img src="icons/paperclip.svg"/>'),$("div#chat div#bottom-bar div#button-right").html('<img src="icons/envelope.svg"/>'),h="chat-input")}function s(t){"show"==t&&($("div#chat div#chat-input").css("display","block"),$("div#chat div#chat-input textarea").focus(),$("div#chat div#bottom-bar div#button-left").html('<img src="icons/arrow-left.svg"/>'),$("div#chat div#bottom-bar div#button-center").html('<img src="icons/paperclip.svg"/>'),$("div#chat div#bottom-bar div#button-right").html('<img src="icons/envelope.svg"/>'),h="chat-input"),"hidde"==t&&($("div#chat div#chat-input").css("display","none"),$("div#chat div#bottom-bar div#button-left").html('<img src="icons/arrow-left.svg"/>'),$("div#chat div#bottom-bar div#button-center").html(""),$("div#chat div#bottom-bar div#button-right").html('<img src="icons/edit.svg"/>'),h="chat")}function c(){clearTimeout(o)}function d(d){switch(d.key){case"Enter":if(o=setTimeout(c,1500),"chat-list"==h)return i("show"),!1;if("chat-input"==h)return d.preventDefault(),s("hidde"),a("show"),!1;break;case"ArrowDown":t("down");break;case"ArrowUp":t("up");break;case"ArrowLeft":t("left");break;case"ArrowRight":t("right");break;case"1":case"SoftLeft":if("chat"==h)return e("show"),i("hidde"),!1;if("chat-input"==h)return s("hidde"),i("show"),!1;if("attachment"==h)return a("hidde"),s("show"),!1;break;case"2":case"SoftRight":if(h="chat-input")return s("show"),!1;break;case"Backspace":d.preventDefault(),(h="chat-list")&&window.close()}}function n(t){switch(t.key){case"Enter":clearTimeout(o)}}let o,h="chat-list";e("show"),document.addEventListener("keydown",d),document.addEventListener("keyup",n)});